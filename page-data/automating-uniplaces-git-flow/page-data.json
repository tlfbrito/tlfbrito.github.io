{"componentChunkName":"component---src-templates-blog-post-js","path":"/automating-uniplaces-git-flow/","result":{"data":{"site":{"siteMetadata":{"title":"Tiago Brito","author":"Tiago Brito"}},"markdownRemark":{"id":"f2b9cbca-f6c3-5320-abeb-36a20f9a3007","html":"<p>At <a href=\"https://www.uniplaces.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Uniplaces</a> we use git-flow almost since the beginning. At first we started with basic:</p>\n<ul>\n<li>dev branch for staging environment</li>\n<li>master for production</li>\n<li>feature branches for new features (based on dev branch)</li>\n</ul>\n<p>P.S.: If you don’t know or aren’t familiar with git-flow, you should stop here are read:</p>\n<ul>\n<li><a href=\"https://medium.com/@nuno.caneco/using-git-flow-243581525aee\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/@nuno.caneco/using-git-flow-243581525aee</a></li>\n<li><a href=\"https://danielkummer.github.io/git-flow-cheatsheet/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://danielkummer.github.io/git-flow-cheatsheet/</a></li>\n</ul>\n<p>After a while we wanted to increase our agility and reduce the time that took us to fix important bugs in our systems, and we decided to introduce the hotfix concept.\nHotfixes are created based on master branch and then merged both to development &#x26; master.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b382217eea9c8931b60576c128fa33db/2cefc/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxUlEQVQI102Ny64BQRRF+///QIwMkDthyMDQoxGR3Lhpr3Dp1tWpfmitqDpOPRRBrMEa7Oyd7fxu03Lba4936yCLkjyPKXEH0WhI+t10teSI2f/mcj7ngR8dwoWfAggL59zaMcaI61VJaZ6wON791A7Nxr5epcOBTSO3Jxij00lBwkdDa/PG8WakUnI7LW+9JKcTC4OM0gKVFHADRABApayV1tmxmP/58Lx+PacJ82bhfptwfpNSgkA70lp9kIgvSyU4qi/uygLeWwQAyroAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Hotfix process\"\n        title=\"Hotfix process\"\n        src=\"/static/b382217eea9c8931b60576c128fa33db/fcda8/1.png\"\n        srcset=\"/static/b382217eea9c8931b60576c128fa33db/12f09/1.png 148w,\n/static/b382217eea9c8931b60576c128fa33db/e4a3f/1.png 295w,\n/static/b382217eea9c8931b60576c128fa33db/fcda8/1.png 590w,\n/static/b382217eea9c8931b60576c128fa33db/efc66/1.png 885w,\n/static/b382217eea9c8931b60576c128fa33db/c83ae/1.png 1180w,\n/static/b382217eea9c8931b60576c128fa33db/2cefc/1.png 1400w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4 id=\"git-flow-hotfixes-cant-be-reviewed\"><a href=\"#git-flow-hotfixes-cant-be-reviewed\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Git-flow hotfixes can’t be reviewed</h4>\n<p>This flow works quite well for smalls teams where everyone knows what other people are doing, but for medium/large\nteams hotfixes create a bypass to Pull-requests which is one of our most important step of our development lifecycle.\nIt’s important that even for small fixes, a second pair of eyes have a look into it.\nTo do this, it we needed create the hotfix branch based on master as normal, and instead of finishing the hotfix\nand merge to master &#x26; development branches it was require to:\nCreate the pull-request from the hotfix to master branch.\nIf the previous pull-request is approved, the developer would need to do the same for development branch:\nCreate the pull-request pointing the hotfix to development branch.\nThis second step, was making me feel bad as a engineer. We are suppose to simplify processes, not to create more entropy.\nI decided then, to create a GitHub application bot to receive Github webhooks and automatically create the second\nPR (hotfix->development branch).</p>\n<h4 id=\"automating-hotfixes-pull-requests\"><a href=\"#automating-hotfixes-pull-requests\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automating hotfixes pull-requests</h4>\n<p>To automate hotfixes, we created a github application. This application will require to have access\nto <a href=\"https://developer.github.com/v3/activity/events/types/#pullrequestevent\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pull-request events</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa0b27da757fe97e251365d612a59c56/2cefc/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABJ0lEQVQY032QX0vDMBTF+/2/go/6KExFZIwxHwdqtzkRStfZuqXtmrZLk2bJanMbb/EvCB4uIbmQc3/3ONZa6DqsXvZHSqmqqjjndV3j6T64RVEIISrGPvoA4Ni/QpMvHzTMaR4Tspi5hGylrCmlvu97npdlmWOgu5y+nk2Cx4CGKcN/xtq+uu4NZUwtZVbuF96mLPdIgT0cyxjTWjsIfLtMLqZRuBNUqJ17H99cx6NhMhmrivHoRRV5sV5n/NjvclCEkDRN0QKfPXZz0KKsoDXISuezaDBIRsN4PBJFvg9WPInLlS+VPmotpQzDEIGNQbLOMQauzpenJ3dP821CSn1sN6m039gABkAetPe8wQgRFXtN0+AFz35y2wIuh4l/pgXwO7N/9A7CYoocuPkuawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Automating hotfixes diagram\"\n        title=\"Automating hotfixes diagram\"\n        src=\"/static/fa0b27da757fe97e251365d612a59c56/fcda8/2.png\"\n        srcset=\"/static/fa0b27da757fe97e251365d612a59c56/12f09/2.png 148w,\n/static/fa0b27da757fe97e251365d612a59c56/e4a3f/2.png 295w,\n/static/fa0b27da757fe97e251365d612a59c56/fcda8/2.png 590w,\n/static/fa0b27da757fe97e251365d612a59c56/efc66/2.png 885w,\n/static/fa0b27da757fe97e251365d612a59c56/c83ae/2.png 1180w,\n/static/fa0b27da757fe97e251365d612a59c56/2cefc/2.png 1400w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This github application will dispatch the pull-request event as a webhook to our uni-webhook bot to handle that request\nand create the same pull-request to development branch if the PR event is defined as closed &#x26; merged.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6aa3b39ef578f9725b2ddcfcfbb9914/39a20/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABBElEQVQY04VR204FMQjcn/cX/DWf9MFj9tobFErb3e6RPY2J0RgnE0oJBBiGp5fnN/eOHjdrEWMkBrXxcgIJstqyeOZc778wzH4xzgKgSNbiAFBKwUgBkJOUUl2AAJEotdZ+FosUEdn3XT+amnNWp9Y951JrPVpLSZJc2I+jnWdnx/AaG0e8jcvHtBoXls2O86ruvBpKwlJSrp0suVPj1qPagerJxNZ5H6BUneAoj7ZK9f+i5tT9GHRIAJimaV1XImKV5jH5v7jG1iel5JzqAtY5Yy0gnue9b9U6vu3ZvqyGr2JtNY+jSs2cVFmKhBC998664IPZjN5CxeoNcy3AKCnrRT8BRsbOocEphNUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Example of a PR (hotfix =&gt; development) auto-generated by our Github bot\"\n        title=\"Example of a PR (hotfix =&gt; development) auto-generated by our Github bot\"\n        src=\"/static/c6aa3b39ef578f9725b2ddcfcfbb9914/fcda8/3.png\"\n        srcset=\"/static/c6aa3b39ef578f9725b2ddcfcfbb9914/12f09/3.png 148w,\n/static/c6aa3b39ef578f9725b2ddcfcfbb9914/e4a3f/3.png 295w,\n/static/c6aa3b39ef578f9725b2ddcfcfbb9914/fcda8/3.png 590w,\n/static/c6aa3b39ef578f9725b2ddcfcfbb9914/39a20/3.png 859w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>We will see in detail, how to create the github application and the uni-webhook bot on the next part of this story.</p>\n<hr>","timeToRead":2,"frontmatter":{"title":"3 years at Uniplaces… and still counting!","date":"November 29, 2019","spoiler":"DynamoDB is NoSQL and distributed database from Amazon webservices that automatically spreads the data and traffic for the table over a sufficient number of servers to handle the request capacity specified by the customer and the amount of data stored."},"fields":{"slug":"/automating-uniplaces-git-flow/","langKey":"en","tags":["git","automation","gitflow","webhook"]}}},"pageContext":{"slug":"/automating-uniplaces-git-flow/","previous":{"fields":{"slug":"/3-years-at-uniplaces-and-still-counting/","langKey":"en","directoryName":"3-years-at-uniplaces-and-still-counting","maybeAbsoluteLinks":[]},"frontmatter":{"title":"3 years at Uniplaces… and still counting!"}},"next":{"fields":{"slug":"/moving-from-medium-to-static-blog/","langKey":"en","directoryName":"moving-from-medium-to-static-blog","maybeAbsoluteLinks":[]},"frontmatter":{"title":"Moving away from Medium"}},"translations":[],"translatedLinks":[]}}}